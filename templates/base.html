<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Foxmood</title>

    <!-- Importando a Fonte Plus Jakarta Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap"
        rel="stylesheet">

    <!-- CORREÇÃO AQUI: Link do Font Awesome limpo (sem integrity para não travar) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <script src="../static/js/flashmessages.js" defer></script>
    <script src="../static/js/postconfig.js" defer></script>
    <script src="../static/js/curtidas.js" defer></script>
    <script src="../static/js/senha.js"></script>
    <script src="../static/js/dashboard.js"></script>
    <script src="../static/js/login_cadastro.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Configuração do Tema e Animação -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'cor-principal': '#080D26',
                        'cor-secundaria': '#FF3460',
                        'cor-post': '#FFFFFF',
                        'cor-fundo': '#F9F9F9',
                        'cor-borda': 'rgba(240, 240, 240, 0.9)',
                        'cor-texto-principal': '#333333',
                        'cor-texto-secundaria': '#6B7280',
                        'cor-texto-header': '#efefef',
                        'hover-cor-secundaria': '#ff0037',
                        'azul-ceu': '#A0E2FF',
                        'azul-lavanda': '#99B9F0',
                        'azul-purpura': '#6C6CEF',
                    },
                    fontFamily: {
                        'sans': ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    keyframes: {
                        'fade-in-down': {
                            '0%': {
                                opacity: '0',
                                transform: 'translateY(-10px)'
                            },
                            '100%': {
                                opacity: '1',
                                transform: 'translateY(0)'
                            },
                        }
                    },
                    animation: {
                        'fade-in-down': 'fade-in-down 0.3s ease-out',
                    }
                }
            }
        }
    </script>

    <link rel="shortcut icon" type="imagex/png" href="../static/img/logo.png">

    <!-- Estilos globais -->
    <style type="text/tailwindcss">
        @layer utilities {
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
        }

        @layer components {
            .btn-nav {
                @apply text-cor-texto-header px-4 py-2 border-2 border-cor-texto-header rounded-lg font-semibold transition-all duration-300 hover:bg-cor-texto-header hover:text-cor-principal no-underline text-center whitespace-nowrap;
            }

            .btn-nav-mobile-sm {
                @apply text-cor-texto-header text-sm font-bold px-3 py-1 border border-cor-texto-header rounded-md transition-all duration-300 hover:bg-cor-texto-header hover:text-cor-principal no-underline;
            }

            .card-post {
                @apply w-[95%] md:w-[90%] min-h-[200px] bg-cor-post rounded-[10px] border-2 border-cor-borda mb-2 transition-colors duration-300 shadow-sm;
            }
        }
    </style>
</head>

<body
    class="font-sans min-h-screen flex flex-col bg-cor-fundo text-cor-texto-principal transition-colors duration-300 select-none scrollbar-hide">

    <!-- HEADER -->
    <header
        class="bg-cor-principal text-cor-texto-header flex flex-wrap justify-between items-center py-4 px-4 md:px-[5%] shadow-md transition-colors duration-300 z-50 relative">

        <!-- 1. LOGO -->
        <div class="flex justify-start items-center gap-2">
            <a href="/" class="flex flex-row items-center justify-center no-underline text-cor-texto-header group">
                <img src="../static/img/logo.png" alt="Logo do Blog"
                    class="w-[40px] md:w-[50px] h-auto mr-2 group-hover:opacity-90 transition-opacity">
                <h1 class="text-[1.5em] md:text-[1.8em] font-bold">Foxmood</h1>
            </a>
        </div>

        <!-- 2. CONTROLES MOBILE -->
        <div class="flex items-center gap-3 md:hidden">
            {% if 'user' not in session and 'admin' not in session %}
            <a href="/login" class="btn-nav-mobile-sm">ENTRAR</a>
            {% endif %}

            <button id="mobile-menu-btn" class="text-cor-texto-header focus:outline-none text-2xl px-2">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>

        <!-- 3. NAV DESKTOP E MENU MOBILE -->
        <div id="nav-content" class="hidden w-full md:flex md:w-auto md:items-center order-last md:order-none mt-4 md:mt-0">
            <nav class="flex flex-col md:flex-row gap-4 w-full md:w-auto items-start md:items-center">

                <!-- ÁREA DE LINKS -->
                {% if 'user' in session or 'admin' in session %}
                    
                    {% if request.path != '/' %}
                    <a href="/" class="btn-nav w-full md:w-auto text-center">HOME</a>
                    {% endif %}

                    {% if 'admin' in session and request.path == '/' %}
                    <a href="/dashboard" class="btn-nav w-full md:w-auto text-center">ÁREA ADM</a>
                    {% endif %}

                    <!-- ÁREA DO PERFIL -->
                    <div class="relative w-full md:w-auto md:ml-auto mt-2 pt-4 border-t border-white/20 md:border-none md:mt-0 md:pt-0"> 
                        
                        <!-- Botão com Foto e Nome -->
                        <button onclick="toggleProfileMenu()" class="flex items-center gap-3 focus:outline-none w-full md:w-auto px-2 md:px-0 py-2 md:py-0 hover:bg-white/10 md:hover:bg-transparent rounded transition-colors">
                            {% if 'user' in session %}
                                <img src="../static/uploads/{{session['foto']}}" alt="Avatar"
                                    class="h-10 w-10 md:h-12 md:w-12 rounded-full object-cover border-2 border-cor-borda hover:border-cor-secundaria transition-colors">
                                <p class="font-bold text-white text-base">{{session['user']}}</p>
                            {% endif %}

                            {% if 'admin' in session and 'user' not in session %}
                                <span class="font-bold mr-2 text-white">Admin</span>
                            {% endif %}

                            <i class="fa-solid fa-chevron-down text-white/70 text-xs ml-auto md:ml-0"></i>
                        </button>

                        <!-- Dropdown Menu -->
                        <div id="profileDropdown" 
                             class="hidden w-full md:w-[200px] bg-white border border-cor-borda shadow-none md:shadow-lg rounded-md z-[100] overflow-hidden animate-fade-in-down flex flex-col mt-2 md:absolute md:right-0 md:top-14">
                            
                            {% if 'user' in session %}
                            <a href="/perfil" class="flex items-center px-4 py-3 text-sm text-cor-texto-principal hover:bg-gray-100 transition-colors border-b border-cor-borda no-underline">
                                <i class="fa-solid fa-user-pen mr-3 text-azul-purpura"></i> Editar Perfil
                            </a>
                            {% endif %}
                            
                            <a href="/logout" class="flex items-center px-4 py-3 text-sm text-red-500 hover:bg-red-50 transition-colors no-underline">
                                <i class="fa-solid fa-right-from-bracket mr-3"></i> Sair
                            </a>
                        </div>
                    </div>

                {% else %}
                    <!-- Opções para quem NÃO está logado -->
                    <a href="/login" class="hidden md:inline-block btn-nav text-center">ENTRAR</a>
                    <a href="/cadastro" class="btn-nav w-full md:w-auto text-center">COMECE AGORA</a>
                {% endif %}
            </nav>
        </div>
    </header>

    <!-- MAIN -->
    <main class="flex-1 min-h-[80vh] w-full overflow-x-hidden">
        {% block conteudo %}{% endblock %}
    </main>

    <!-- FOOTER -->
    <footer
        class="min-h-[10vh] bg-cor-principal text-cor-texto-header flex flex-col items-center py-5 transition-colors duration-300">

        <!-- Mídias Sociais -->
        <section class="flex flex-wrap justify-center md:justify-between items-center w-[90%] max-w-[1200px] py-5 gap-6">
            <div class="flex items-center justify-center md:justify-start flex-1 min-w-[250px] text-center md:text-left">
                <h2 class="text-lg md:text-xl m-0 text-cor-texto-header font-semibold">Fique conectado(a) em nossas redes sociais!</h2>
            </div>

            <div class="flex justify-center md:justify-end items-center gap-6 text-[24px] md:text-[28px] flex-1 min-w-[200px]">
                <a href="https://github.com/Lorena-Rinaldo" target="_blank" rel="noopener noreferrer"
                    class="text-cor-texto-header transition-all duration-300 hover:scale-115 hover:text-white">
                    <i class="fab fa-github"></i>
                </a>

                <a href="https://www.linkedin.com/in/lorena-rinaldo01" target="_blank" rel="noopener noreferrer"
                    class="text-cor-texto-header transition-all duration-300 hover:scale-115 hover:text-[#0A66C2]">
                    <i class="fab fa-linkedin-in"></i>
                </a>

                <a href="#" class="text-cor-texto-header transition-all duration-300 hover:scale-115 hover:text-[#25D366]">
                    <i class="fab fa-whatsapp"></i>
                </a>

                <a href="#"
                    class="text-cor-texto-header transition-all duration-300 hover:scale-115 hover:text-transparent hover:bg-clip-text hover:bg-[radial-gradient(circle_at_30%_107%,#fdf497_0%,#fdf497_5%,#fd5949_45%,#d6249f_60%,#285AEB_90%)]">
                    <i class="fab fa-instagram"></i>
                </a>

                <a href="#"
                    class="text-cor-texto-header transition-all duration-300 hover:scale-115 hover:text-[#FF0000]">
                    <i class="fab fa-youtube"></i>
                </a>
            </div>
        </section>

        <hr class="w-[90%] md:w-full h-px border-none my-5 bg-cor-fundo opacity-20">

        <!-- Informações -->
        <section class="flex flex-wrap justify-between w-[90%] max-w-[1200px] mb-8 gap-8 md:gap-5">
            <div class="flex-1 min-w-[140px] md:min-w-[180px] p-2 text-center md:text-left">
                <h3 class="text-lg mb-4 text-cor-texto-header font-bold">Empresa</h3>
                <hr class="w-[50px] mb-4 border-none h-[2px] bg-cor-secundaria mx-auto md:mx-0">
                <div class="flex flex-col gap-1">
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Sobre Nós</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Nossa Missão</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Valores</a>
                </div>
            </div>

            <div class="flex-1 min-w-[140px] md:min-w-[180px] p-2 text-center md:text-left">
                <h3 class="text-lg mb-4 text-cor-texto-header font-bold">Produtos</h3>
                <hr class="w-[50px] mb-4 border-none h-[2px] bg-cor-secundaria mx-auto md:mx-0">
                <div class="flex flex-col gap-1">
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Visão Geral</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Recursos</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Integração</a>
                </div>
            </div>

            <div class="flex-1 min-w-[140px] md:min-w-[180px] p-2 text-center md:text-left">
                <h3 class="text-lg mb-4 text-cor-texto-header font-bold">Links Úteis</h3>
                <hr class="w-[50px] mb-4 border-none h-[2px] bg-cor-secundaria mx-auto md:mx-0">
                <div class="flex flex-col gap-1">
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Privacidade</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Termos</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">FAQ</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Suporte</a>
                </div>
            </div>

            <div class="flex-1 min-w-[140px] md:min-w-[180px] p-2 text-center md:text-left">
                <h3 class="text-lg mb-4 text-cor-texto-header font-bold">Contato</h3>
                <hr class="w-[50px] mb-4 border-none h-[2px] bg-cor-secundaria mx-auto md:mx-0">
                <div class="flex flex-col gap-1">
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Fale Conosco</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Suporte Técnico</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Localização</a>
                    <a href="#" class="text-cor-post text-[15px] block mb-1 hover:text-cor-secundaria hover:underline">Horário</a>
                </div>
            </div>
        </section>

        <hr class="w-[90%] md:w-full h-px border-none my-5 bg-cor-fundo opacity-20">

        <section class="w-[90%] max-w-[1200px] text-center py-2 text-sm text-cor-texto-header">
            ©2025 - Lorena Rinaldo
        </section>
    </footer>

    <!-- SCRIPTS -->
    <script>
        function toggleProfileMenu() {
            const menu = document.getElementById('profileDropdown');
            if (menu.classList.contains('hidden')) {
                menu.classList.remove('hidden');
            } else {
                menu.classList.add('hidden');
            }
        }

        const mobileBtn = document.getElementById('mobile-menu-btn');
        const navContent = document.getElementById('nav-content');

        if(mobileBtn && navContent) {
            mobileBtn.addEventListener('click', () => {
                navContent.classList.toggle('hidden');
            });
        }

        window.addEventListener('click', function (e) {
            const profileMenu = document.getElementById('profileDropdown');
            const profileBtn = document.querySelector('button[onclick="toggleProfileMenu()"]');

            if (profileMenu && profileBtn) {
                if (!profileMenu.classList.contains('hidden') && !profileMenu.contains(e.target) && !profileBtn.contains(e.target)) {
                    profileMenu.classList.add('hidden');
                }
            }
        });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
